#!/bin/bash
#date1=$(date --date="1 days ago" +%Y%m%d)
#date2=$(date --date="2 days ago" +%Y%m%d)
#date3=$(date --date="3 days ago" +%Y%m%d)
#BKDIR=/data/rxjh/game/gs/db/backup/
#BKZIP=/data/dbbackup/
#file=$(ls -l $BKDIR | grep -v "total" | grep "$date1\|$date2\|$date3" |awk '{print $9}' | uniq)
#for i in $file
#do
#tar -C $BKDIR -zcf $BKDIR$i.tar.gz $i
#rm -rf $BKDIR$i
#mv $BKDIR$i.tar.gz $BKZIP
#done
#/usr/bin/find $BKZIP -mmin +8640  -name "*.tar.gz" -exec rm {} \;
############################update thucnk###########################
#!/bin/bash
date1=$(date --date="1 days ago" +%Y%m%d)
date2=$(date --date="2 days ago" +%Y%m%d)
date3=$(date --date="3 days ago" +%Y%m%d)
BKDIR=/data/rxjh/game/gs/db/backup/
BKZIP=/data/dbbackup/
file=$(ls -l $BKDIR | grep -v "total" | grep "$date1\|$date2\|$date3" |awk '{print $9}' | uniq)
for i in $file
do
tar -C $BKDIR -zcf $BKDIR$i.tar.gz $i
rm -rf $BKDIR$i
mv $BKDIR$i.tar.gz $BKZIP
done
/usr/bin/find $BKZIP -mmin +8640  -name "*.tar.gz" -exec rm {} \;
