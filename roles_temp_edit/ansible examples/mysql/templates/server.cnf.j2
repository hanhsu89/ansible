[server]

[mysqld]

[galera]

binlog_format=ROW
default-storage-engine=innodb
innodb_autoinc_lock_mode=2

bind-address=0.0.0.0
wsrep_on=ON
wsrep_provider=/usr/lib64/galera/libgalera_smm.so
wsrep_cluster_address="gcomm://192.168.10.51,192.168.10.52,192.168.10.53"

wsrep_cluster_name="cluster1"
wsrep_node_address="192.168.10.53"
wsrep_node_name="db03"

wsrep_sst_method=rsync
wsrep_sst_auth=sst_user:dbpass

[embedded]

[mariadb]

[mariadb-10.1]

gtid_domain_id=1
server_id=3
log_slave_updates=1

binlog_format=ROW
log_bin=/var/log/mysql/mysql-bin.log
log_bin_index=/var/log/mysql/mysql-bin.log.index
max_binlog_size=300M
expire_logs_days=4

bind-address=0.0.0.0
port=3306
socket=/var/lib/mysql/mysql.sock

user=mysql

datadir=/var/lib/mysql

log_error=/var/log/mysqld/mysql_error.log                                                                                                                                   

default_storage_engine=InnoDB
binlog_format=ROW
sync_binlog=0
skip_name_resolve=1
log_output=FILE
max_allowed_packet=64M

innodb_buffer_pool_size = 2048M  # 80% RAM
innodb_buffer_pool_instances = 4 # CPU cores 
innodb_file_per_table = 1 # Is the recommended way nowadays 
innodb_write_io_threads = 8 # If you have a strong I/O system or SSD
innodb_read_io_threads = 8 # If you have a strong I/O system or SSD
innodb_io_capacity = 800
innodb_flush_method=O_DIRECT
innodb_flush_log_at_trx_commit=2
innodb_autoinc_lock_mode=2
innodb_doublewrite=1
sync_binlog=0
innodb_log_buffer_size= 8M
innodb_open_files = 1000
innodb_thread_concurrency = 50
innodb_old_blocks_time=1000

query_cache_size        = 0
query_cache_type        = 0
table_open_cache=1000   

thread_stack            = 256K
thread_cache_size       = 1000
max_connections         = 1000

wait_timeout=30 ### TBD

interactive_timeout=30
connect_timeout=60
net_read_timeout=300
net_write_timeout=300

tmp_table_size=128M
max_heap_table_size=128M
tmpdir=/var/log/mysqld/tmpdir

slow_query_log=1
log_queries_not_using_indexes=0
log_warnings=1
long_query_time = 2
slow_query_log_file = /var/log/mysqld/mysql_slow.log

general_log=0
general_log_file=/var/log/mysql/mysql_general.log

innodb_log_files_in_group=2
innodb_log_file_size=512M
